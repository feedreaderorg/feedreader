syntax = "proto3";

import "google/protobuf/empty.proto";

option csharp_namespace = "FeedReader.Share.Protocols";

service WebServerApi
{
    rpc DiscoverFeeds(DiscoverFeedsRequest) returns (DiscoverFeedsResponse);
    rpc SubscribeFeed(SubscribeFeedRequest) returns (SubscribeFeedResponse);
    rpc SubscribeEvents(google.protobuf.Empty) returns (stream Event);
}

message DiscoverFeedsRequest
{
    string Query = 1;
}

message DiscoverFeedsResponse
{
    repeated FeedInfo Feeds = 1;
}

message SubscribeFeedRequest
{
    string FeedId = 1;
    bool Subscribe = 2;
}

message SubscribeFeedResponse
{
}

message FeedInfo
{
    string SubscriptionName = 1;
    string IconUri = 2;
    string Name = 3;
    string Description = 4;
    int32 TotalSubscribers = 5;
    string Id = 6;
}

message User {
    string Id = 1;
    repeated FeedInfo SubscribedFeeds = 2;    
}

message Event
{
    oneof event {
        User User = 1;
    }
}